# 同步区块

_dsysb_ 启动了一个节点。启动时，会先读取 _config_ 文件中的 _remote\_hosts_，然后将启动参数中的 _-remote\_host_ 追加到已读取的内容中，然后 _dsysb_ 会连接这些 P2P 节点

当一个节点被新的节点连接时，它不但会介绍自身知道的其他节点给新节点连接，还会把自身最高区块号发送给新进节点。然后新进节点会判断是否应该向其同步区块。

比如新进节点之前参与过网络，后来关闭了，最高区块是10000。而当前节点由于一些网络原因，最高区块才9998。那么新进节点的区块高于当前节点，不会向当前节点要求同步

再比如新进节点的最高区块是4000，之前启动过，已经关闭了几天了。而当前节点的最高区块是10000。那么新节点会从 4001，4002，4003……，一直同步到10000。

当然每追加一个区块时都会验证，如果验证失败将不会追加

区块在同步状态时，如果收到其他节点出块通知，会忽略。

但是为了防止网络原因，导致同步区块断连，而一直在同步状态，那么会有一个8秒的超时机制，如果超过了8秒收不到新的区块，新会判断一些条件，并且跳出同步状态，然后主动向当前节点，再次请求区块高度信息，如果网络通信成功，将再次进入同步状态，如果网络通信又失败，比如当且节点已经关闭，那么新节点已经跳出同步状态，将自然维持。或者条件不符合的话直接同步结束。之前同步的有效。

在每次有新区块产生时，也会广播到整个网络，有落后的节点，就会追加上，如果落后多个区块，就会跟启动时的同步流程那样进行同步。
