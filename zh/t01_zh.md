# 开始挖矿

首先你要有一个钱包地址，这个钱包地址可以保存在挖矿的这台机器中，也可以另外保存，矿工程序并不需要验证私钥，所以你只需要提供钱包地址就行，而你的私钥可以保存在其他设备上，这样更安全。


如何获取钱包地址，以及如何开始、停止、暂停和恢复挖矿，在[快速上手](quickstart_zh.md)中已经描述过。

矿工程序负责 _PoW_ 挖矿。挖到矿后会将新挖到的区块发送给主程序。主程序会验证新区块。

如果验证通过，会将新的区块写到链上（数据库中），并广播给与之相连的其他 _P2P_ 节点，同时会将交易池中的交易最多打包511个到下一个更新的预备区块中，到预备区块后，这511个交易将移出交易池，预备的区块中的 _coinbase_ 交易的奖励接受者，会被设为 _dsysbminer_ 发来的矿工的钱包地址，并插入到其他交易之前，作为第一个交易，凑成总共最多512个交易，然后 _dsysb_ 会将预备区块发送给 _dsysbminer_，_dsysbminer收到后，会用新的预备区块进行挖矿，挖到后再次发给 _dsysb_，如此循环往复。

如果验证失败，则不会写到链上，也不会进行广播，然后会将当前交易池中的交易打包到新的预备区块中，同样也会发给 _dsysbminer_，_dsysbminer收到后，会用新的预备区块进行挖矿，挖到后再次发给 _dsysb_，如此循环往复。

在写这个文档的时候是 v0.0.1 版本的程序包，有一个浪费算力的不足之处，就是在收到其他节点，或者本节点的其他矿工程序挖到较新的区块时，虽然 _dsysb_ 收到了通知，但是 _dsysbminer_ 还在傻傻的挖落后的区块，并不会停止，知道它挖到了落后的区块，发送给 _dsysb_，_dsysb_ 验证时发现是落后的区块，不会加到链上，然后会发回 _dsysbminer_ 一个新的区块，让 _dsysbminer_ 把它挖出来。

在一个主程序，多个矿工的情况下，本节点的一个矿工挖出新的区块后，其他矿工也会傻傻地继续挖落后的区块，浪费算力。

这个不足将在 Mainnet 上线前优化。

多个矿工挖矿请看这里[多个miner挖矿](t03_zh.md)
