## 1. 简介

## 2. 共识与工作量证明（Proof of Work）

### 定义
工作量证明是一种通过计算复杂数学问题来验证交易和创建新区块的机制。参与者（矿工）通过解决这些问题来证明其工作量，从而获得网络奖励。

### 如何工作
- **问题的复杂性**：矿工需找到一个特定的哈希值，该哈希值必须满足特定条件（如以特定数量的零开头）。这个哈希值是通过对区块头信息进行哈希计算得到的。
- **竞争**：所有矿工同时争夺解决该问题，谁先找到符合条件的哈希值，谁就能将下一个区块添加到区块链中。
- **奖励**：成功解决问题的矿工将获得一定数量的加密货币作为奖励，并可以收取交易费用。

### 难度调整
为了保持区块生成的稳定性，网络定期调整问题的难度。dsysb 网络每 2016 个区块会调整一次难度，以确保平均每 10 分钟生成一个区块。

详情参考比特币白皮书：[比特币白皮书](https://bitcoin.org/bitcoin.pdf)

## 3. 账户模型
在去中心化数字资产系统中，账户模型是用户与网络交互的核心。我们提出了一种创新的账户模型，旨在简化资产管理并增强安全性，允许用户在同一账户中持有原生代币及其他自定义资产。

### 账户模型组成
- **余额管理**：账户的原生代币余额表示用户在网络中的基本财务资源，采用无符号 64 位整数形式存储，确保余额上限为 18,446,744,073,709,551,615，以满足大多数应用需求。
- **自定义资产**：每个账户可以持有多个自定义资产，这些资产通过唯一的资产 ID 表示，资产 ID 以十六进制字符串形式存储，资产余额同样以无符号 64 位整数表示。这一设计增强了系统的灵活性和可扩展性。
- **防重放攻击**：每个账户维护一个随机数（nonce），表示用户发起的交易次数，以确保每笔交易的唯一性，增强系统安全性。

在账户状态管理方面，我们通过序列化和反序列化操作进行有效处理。编码过程将账户信息打包成字节数组，便于存储和传输；解码过程则将字节数组还原为可操作的账户对象。编码时，首先将余额写入字节数组，随后依次添加每个资产的 ID 及其余额，最后添加 nonce，采用小端字节序以提高效率。解码过程通过解析字节数组恢复账户的原始状态。

最后，使用 SHA-256 哈希算法对账户进行摘要，以确保账户状态的完整性和不可篡改性。哈希值提供账户当前状态的唯一标识，能够有效防止数据篡改和伪造。这种综合设计不仅提升了账户模型的安全性与可靠性，还为用户提供了更加灵活和高效的资产管理方式。

## 4. 加密算法
椭圆曲线加密（Elliptic Curve Cryptography, ECC）是一种基于椭圆曲线数学理论的公钥密码学技术，广泛应用于安全通信和数据保护。与传统公钥加密算法相比，ECC 提供同等安全性所需的密钥长度显著更短，从而提高了计算效率并降低了存储和带宽需求。例如，使用 256 位的椭圆曲线密钥可以提供与 3072 位 RSA 密钥相媲美的安全性。这一特性使得 ECC 特别适用于资源有限的环境，如移动设备和物联网（IoT）设备。ECC 的安全性依赖于椭圆曲线离散对数问题的计算难度，攻击者在没有私钥的情况下，几乎不可能高效地计算出密钥或破解通信。此外，ECC 还支持数字签名、密钥交换和身份验证等功能，成为现代密码学中重要的加密方案，为信息安全提供了强有力的保障。

详情参考比特币白皮书：[比特币白皮书](https://bitcoin.org/bitcoin.pdf)

## 5. 区块结构
本白皮书介绍了一种新的区块链模型，旨在存储和验证去中心化数字资产的交易。我们的设计基于高效的块头和块体结构，以增强数据的完整性、安全性和可扩展性。

### 区块头与块体
- **区块头**：包含多个关键字段，如前一个哈希、当前哈希、状态根、交易根、挖矿难度目标、时间戳和随机数。这些字段确保区块链的不可篡改性、唯一性及验证区块状态的能力。
- **区块体**：包含一组交易，支持区块内事务的执行和管理，提升用户交互效率。

相较于比特币的区块，我们的模型通过引入状态根和交易根，进一步增强了区块的安全性和可扩展性，允许更复杂的交易和状态管理。区块的状态通过序列化（编码）和反序列化（解码）操作进行管理，其中块头和块体的信息被打包成字节数组，便于存储和传输。编码过程中，各字段依次写入字节数组，并采用小端字节序以提高效率；解码过程则通过解析字节数组重建块对象的原始状态。

此外，区块链的数据可以通过 HTTP 请求获取，用户可以根据区块索引查询特定区块的信息，从而轻松访问区块链中的任意块和交易信息。

## 6. 交易
`transaction` 是数字资产系统的核心概念，定义了如何处理不同类型的交易。通过 `transaction_I` 接口，所有交易类型具备统一的方法，包括生成唯一哈希值、获取交易类型、进行编码以及字符串表示。这种设计确保了代码的可扩展性和维护性，使不同交易类型能够方便地进行管理。

### 交易类型介绍
- **coinbase交易**：作为区块链中最基础的交易类型，coinbase交易用于奖励矿工以激励其参与网络维护。尽管未具体实现coinbase交易的细节，但其特殊地位与比特币网络相似，用于创建新币并将其分配给矿工。

- **create交易**：用于创建新的数字资产，允许用户定义资产的基本属性，如名称和初始供应量。通过 `createRawTransaction` 函数，这类交易被打包成原始交易数据并通过 `encode()` 方法进行编码。与比特币的简单支付交易相比，create交易为用户提供了更大的灵活性，能够发行和管理多样化的数字资产。

- **transfer交易**：用于在用户之间转移已存在的资产，用户可指定转出地址、接收地址和转移金额。这种交易确保资产的安全性和完整性，通过严格的签名和验证机制保障交易有效性。与比特币的标准转账机制相似，transfer交易同样注重安全和不可篡改性。

- **exchange交易**：允许用户在同一操作中进行多个资产的交换，适合复杂交易需求。代码中对多个transfer交易的批量处理增加了系统的灵活性和效率，这在比特币的单一转账模式下难以实现。通过这种方式，用户能更高效地进行资产交易。

## 7. 用户创建资产与手续费机制
在这个去中心化的系统中，用户在创建交易时无需支付任何手续费。为了鼓励更多用户参与，除了挖矿所提供的区块奖励外，用户在创建个人资产时可以选择该资产的有效区块数量。根据选择的有效区块长度，系统将按照单价计算需从用户账户中扣除的金额（以聪为单位），这部分费用将作为矿工的奖励（初始的出块奖励为 500 DSB）。

一旦用户创建的资产过期，如果没有人进行续租，该资产将从 dsysb 网络中消失。如果用户选择续租，则会按照预设的单价和有效区块长度一次性扣除相应费用，以继续支持矿工的奖励。
